(function(e){e.BubbleShoot={MODES:{SINGLEPLAYER:'singleplayer'},deploy:'local',PLAYER_SIDE_TOP:'top',PLAYER_SIDE_BOTTOM:'bottom',BUBBLE_STATE_ON_BOARD:1,BUBBLE_STATE_FIRING:3,BUBBLE_STATE_POPPING:4,points:0,debug:!1,newline:0,Service:{}}})(this.window||this),function(e){function t(e,a){return 0==a?e:t(a,e%a)}var a=screen.width,o=screen.height,i=t(a,o);e.aspectRatio=[a/i,o/i]}(BubbleShoot),function(e){var t=Math.PI,a=function(){function e(e,t){return e+t}return function(t){return t.reduce(e,0)/t.length}}(),o=function(){var e=function(e){var t=0,a=0;for(a in e)e.hasOwnProperty(a)&&t++;return t},t=function(e,t){var a=0,o=0;for(o in e)if(e.hasOwnProperty(o)){if(a==t)return o;a++}return!1},o=function(e,t,a){return a=null===a?1:a,e=i(e)?1*e:e.toLowerCase(),t=i(t)?1*t:t.toLowerCase(),e==t?0:e>t?1*a:-1*a},i=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return function(a,i){i=i||{};var n=e(i);if(!n)return a.sort(o);for(var d in i)i[d]='desc'==i[d]||-1==i[d]?-1:'skip'==i[d]||0===i[d]?0:1;return a.sort(function(e,a){for(var d,s=0,r=0;0==s&&r<n;)if(d=t(i,r),d){var l=i[d];s=o(e[d],a[d],l),r++}return s}),a}}(),i=function(){var e=[{base:'A',letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:'AA',letters:/[\uA732]/g},{base:'AE',letters:/[\u00C6\u01FC\u01E2]/g},{base:'AO',letters:/[\uA734]/g},{base:'AU',letters:/[\uA736]/g},{base:'AV',letters:/[\uA738\uA73A]/g},{base:'AY',letters:/[\uA73C]/g},{base:'B',letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:'C',letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:'D',letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:'DZ',letters:/[\u01F1\u01C4]/g},{base:'Dz',letters:/[\u01F2\u01C5]/g},{base:'E',letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:'F',letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:'G',letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:'H',letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:'I',letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:'J',letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:'K',letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:'L',letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:'LJ',letters:/[\u01C7]/g},{base:'Lj',letters:/[\u01C8]/g},{base:'M',letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:'N',letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:'NJ',letters:/[\u01CA]/g},{base:'Nj',letters:/[\u01CB]/g},{base:'O',letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:'OI',letters:/[\u01A2]/g},{base:'OO',letters:/[\uA74E]/g},{base:'OU',letters:/[\u0222]/g},{base:'P',letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:'Q',letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:'R',letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:'S',letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:'T',letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:'TZ',letters:/[\uA728]/g},{base:'U',letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:'V',letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:'VY',letters:/[\uA760]/g},{base:'W',letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:'X',letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:'Y',letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:'Z',letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:'a',letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:'aa',letters:/[\uA733]/g},{base:'ae',letters:/[\u00E6\u01FD\u01E3]/g},{base:'ao',letters:/[\uA735]/g},{base:'au',letters:/[\uA737]/g},{base:'av',letters:/[\uA739\uA73B]/g},{base:'ay',letters:/[\uA73D]/g},{base:'b',letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:'c',letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:'d',letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:'dz',letters:/[\u01F3\u01C6]/g},{base:'e',letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:'f',letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:'g',letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:'h',letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:'hv',letters:/[\u0195]/g},{base:'i',letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:'j',letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:'k',letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:'l',letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:'lj',letters:/[\u01C9]/g},{base:'m',letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:'n',letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:'nj',letters:/[\u01CC]/g},{base:'o',letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:'oi',letters:/[\u01A3]/g},{base:'ou',letters:/[\u0223]/g},{base:'oo',letters:/[\uA74F]/g},{base:'p',letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:'q',letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:'r',letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:'s',letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:'t',letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:'tz',letters:/[\uA729]/g},{base:'u',letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:'v',letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:'vy',letters:/[\uA761]/g},{base:'w',letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:'x',letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:'y',letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:'z',letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];return function(t){for(var a=0;a<e.length;a++)t=t.replace(e[a].letters,e[a].base);return t}}();e.Utils={mean:a,createRect:function(e,t,a){var o=BubbleShoot.game.add.bitmapData(e,t);return o.ctx.beginPath(),o.ctx.rect(0,0,e,t),o.ctx.fillStyle=a,o.ctx.fill(),o.ctx.closePath(),o},createButton:function(){},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},generateUUID:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},radiansToDegrees:function(e){return 180*e/t},degreesToRadians:function(e){return e*t/180},keySort:o,removeAccents:i}}(this.window||this),function(e){function t(e){this.queue={},Worker?this.worker=new Worker('src/js/ai/service.'+e+'.js'):alert('Error: Worker not suported!');var t=this;this.worker.addEventListener('message',function(e){var a=e.data,o=t.queue[a.id];t.queue[a.id]&&(t.queue[a.id].done.apply(o.context,a.args),delete t.queue[a.id])})}t.prototype.execute=function(e,t,a,o){var i=Utils.generateUUID();a&&(this.queue[i]={done:a,context:o||null}),this.worker.postMessage({id:i,command:e,args:t})},e.Background=t}(BubbleShoot);(function(e){var t=0,a=0,o=0,i={},n=0,d=0,s=function(e){this.player=e,this.side=e.side,this.x=0,this.y=0,this.grid=[],this.maxRows=0,this.maxCols=0};s.prototype={setGrid:function(e){this.grid=e,this.maxRows=this.grid.length,this.maxCols=this.grid[0].length},createGrid:function(e,t){this.maxRows=e,this.maxCols=t,this.grid=[],a=0;for(var o=0;o<this.maxRows;o++){this.grid[o]=[];for(var i=0==o%2,n=0;n<this.maxCols;n++)(i||!(n>=this.maxCols-1))&&(this.grid[o][n]=BubbleShoot.Bubble.getRandomSprite())}},createLifes:function(){this.lifes=BubbleShoot.game.add.group();var e=BubbleShoot.game.add.image(0,0,'bolaon'),t=BubbleShoot.game.add.image(0,0,'bolaon'),a=BubbleShoot.game.add.image(0,0,'bolaon');e.y=0.95*BubbleShoot.game.world.height-0.95*e.height,e.x=BubbleShoot.game.world.width/2-e.width/2+-220,t.y=0.95*BubbleShoot.game.world.height-0.95*t.height,t.x=BubbleShoot.game.world.width/2-t.width/2+-175,a.y=0.95*BubbleShoot.game.world.height-0.95*a.height,a.x=BubbleShoot.game.world.width/2-a.width/2+-130,this.lifes.add(e),this.lifes.add(t),this.lifes.add(a)},createBubbles:function(){BubbleShoot.UI.board.separatorHeight+1;this.height=95,this.width=BubbleShoot.UI.bubble.size*this.maxCols,this.x=BubbleShoot.UI.board.width-this.width,this.side==BubbleShoot.PLAYER_SIDE_BOTTOM&&(this.y=this.height),this.side==BubbleShoot.PLAYER_SIDE_TOP&&(this.y=0);for(var e=0,t=this.grid.length;e<t;e++)for(var a=0,o=this.grid[e].length;a<o;a++){var i=this.grid[e][a],n=BubbleShoot.Bubble.create(this.player,e,a,i);n.fixPositionByGrid(),this.grid[e][a]=n}},createLine:function(){o=0,this.gridNew=[],a++;var e=0==a%2;if(e)var t=9;else var t=8;for(var i=0;i<t;i++)this.gridNew.push(BubbleShoot.Bubble.getRandomSprite());for(var i=0;i<t;i++){var n=this.gridNew[i],d=BubbleShoot.Bubble.create(this.player,0,i,n);d.alpha=0;BubbleShoot.game.add.tween(d).to({alpha:1},200,'Linear',!0,0);this.gridNew[i]=d}this.grid.unshift(this.gridNew);for(var s=0,r=this.grid.length;s<r;s++)for(var d,i=0,l=this.grid[s].length;i<l;i++)d=this.grid[s][i],void 0!=d&&(d.row=s,d.col=i,d.fixPositionByGrid())},addBubble:function(e){this.grid[e.row]||(this.grid[e.row]=[]),this.grid[e.row][e.col]&&console.error('addBubble rewrite grid',e.row,e.col),this.grid[e.row][e.col]=e},removeBubble:function(e,t){if(delete this.grid[e.row][e.col],!t)return e.kill();if('remove'==t){e.children[0].visible=!0;var a=e.children[0].animations.add('chispa');e.children[0].animations.play('chispa',30,!1),a.onComplete.add(function(){e.children[0].animations.stop(),e.children[0].kill(),e.loadTexture('plop'+e.points);var t=BubbleShoot.game.add.tween(e.scale).to({x:BubbleShoot.UI.bubble.scale+0.1,y:BubbleShoot.UI.bubble.scale+0.1},200,'Linear',!0,0);t.onComplete.add(function(){setTimeout(function(){var t=BubbleShoot.game.add.tween(e.scale).to({x:0,y:0},400,'Linear',!0,0);t.onComplete.add(function(){e.kill(),e.loadTexture('sprites',e.tag)})},200)})})}else{e.children[0].visible=!0;var o=e.children[0].animations.add('chispa');e.children[0].animations.play('chispa',30,!1),o.onComplete.add(function(){e.children[0].animations.stop(),e.children[0].kill(),setTimeout(function(){var t=BubbleShoot.game.add.tween(e.scale).to({x:0,y:0},400,'Linear',!0,0);t.onComplete.add(function(){e.kill()})},200)})}},getBubbleAt:function(e,t){return this.grid[e]&&this.grid[e][t]&&this.grid[e][t]},getBubblesAround:function(e,t){for(var a=[],o=0==e%2,i=e-1;i<=e+1;i++)for(var n=t-1;n<=t+1;n++)if((n!=t||i!=e)&&(o||i==e||n!==t-1)&&!(o&&i!=e&&n===t+1)){var d=this.getBubbleAt(i,n);d&&a.push(d)}return a},getGroup:function(e,t,a){var t=t||{},o=e.row,n=e.col;if(t[o]||(t[o]={}),t.list||(t.list=[]),t[o][n])return t;t[o][n]=e,t.list.push(e);for(var d,s=this.getBubblesAround(o,n),r=0;r<s.length;r++)d=s[r],(d.tag==e.tag||a)&&(t=this.getGroup(d,t,a));return t},findOrphans:function(){for(var e=[],t=[],a=0;a<this.grid.length;a++)e[a]=[];for(var o,i=0;i<this.grid[0].length;i++)if(o=this.getBubbleAt(0,i),o&&!e[0][i]){var n=this.getGroup(o,{},!0);n.list.forEach(function(t){e[t.row][t.col]=!0})}for(var a=0;a<this.grid.length;a++)for(var o,i=0;i<this.grid[a].length;i++)o=this.getBubbleAt(a,i),o&&!e[a][i]&&t.push(o);return t},addBubblex:function(e,t){var a=this,o=t.some(function(t){return t===e});o||(console.log(o),'magenta'==e.tag&&n++,'blue'==e.tag&&d++,t.push(e))},searchMagentaBlue:function(e){var a=this,s=!0,r=e.tag,l='';n=0,d=0,'magenta'==e.tag?(n++,l='blue'):(d++,l='magenta'),e.tag='blue';var g=this.getGroup(e);e.tag='magenta';var p=this.getGroup(e);if(e.tag=r,'magenta'==e.tag||'blue'==e.tag){if(3<=g.list.length)if(i.list=[],g.list.forEach(function(e){e.tag;e.tag=l;var t=a.getGroup(e);e.tag='blue';var o=t.list;2<=o.length&&o.forEach(function(e){a.addBubblex(e,i.list)})}),0!=n&&0!=d){BubbleShoot.animations.purpleX2.visible=!0;var u=BubbleShoot.animations.purpleX2.animations.add('explode');BubbleShoot.animations.purpleX2.animations.play('explode',30,!1),u.onComplete.add(function(){BubbleShoot.animations.purpleX2.visible=!1}),o=0,BubbleShoot.sound.explosion.play(),BubbleShoot.sound.goodjob.play(),console.log(i),s=!1,o=0,g.list.forEach(function(e){a.addBubblex(e,i.list)}),i.list.forEach(function(e){('magenta'==e.tag||'blue'==e.tag)&&(t+=40,e.points=40),a.removeBubble(e,'remove')})}else s=!0;if(console.log('Roll   '+n+'  -  '+d),n=0,d=0,3<=p.list.length)if(i.list=[],p.list.forEach(function(e){var t=e.tag;e.tag='magenta';var o=a.getGroup(e);e.tag=t;var n=o.list;2<=n.length&&n.forEach(function(e){a.addBubblex(e,i.list)})}),0!=n&&0!=d){BubbleShoot.animations.purpleX2.visible=!0;var u=BubbleShoot.animations.purpleX2.animations.add('explode');BubbleShoot.animations.purpleX2.animations.play('explode',30,!1),u.onComplete.add(function(){BubbleShoot.animations.purpleX2.visible=!1}),console.log(i),o=0,BubbleShoot.sound.explosion.play(),BubbleShoot.sound.goodjob.play(),s=!1,o=0,p.list.forEach(function(e){a.addBubblex(e,i.list)}),i.list.forEach(function(e){('magenta'==e.tag||'blue'==e.tag)&&(t+=40,e.points=40),a.removeBubble(e,'remove')})}else s=!0;return console.log('Back   '+n+'  -  '+d),!1!=s}return!0},checkMatches:function(e){var a=this.getGroup(e),i=this;o++;var n=this.searchMagentaBlue(e);if(console.log(n),n||void 0==n)if(3>a.list.length);else{if(BubbleShoot.sound.explosion.play(),o=0,'magenta'==a.list[0].tag){BubbleShoot.animations.sabor.visible=!0;var d=BubbleShoot.animations.sabor.animations.add('explode');BubbleShoot.animations.sabor.animations.play('explode',30,!1),d.onComplete.add(function(){BubbleShoot.animations.sabor.visible=!1})}else if('blue'==a.list[0].tag){BubbleShoot.animations.mentol.visible=!0;var d=BubbleShoot.animations.mentol.animations.add('explode');BubbleShoot.animations.mentol.animations.play('explode',30,!1),d.onComplete.add(function(){BubbleShoot.animations.mentol.visible=!1})}a.list.forEach(function(e){t+='magenta'==e.tag||'blue'==e.tag?20:10,i.removeBubble(e,'remove')})}3<=o&&(BubbleShoot.player.board.createLine(),BubbleShoot.player.board.createLine()),this.updatelifes(o),console.log(o)},updatelifes:function(e){console.log(this.lifes),0==e?this.lifes.children.forEach(function(e){e.loadTexture('bolaon')}):1==e?this.lifes.children.forEach(function(e,t){console.log(t),0==t||1==t?e.loadTexture('bolaon'):e.loadTexture('bolaoff')}):2==e&&this.lifes.children.forEach(function(e,t){0==t?e.loadTexture('bolaon'):e.loadTexture('bolaoff')})},checkOrphans:function(){var e=this;this.findOrphans().forEach(function(t){e.removeBubble(t,'removeOnly')})},getRemaining:function(){for(var e=[],t=0;t<this.grid.length;t++)for(var a,o=0;o<this.grid[t].length;o++)a=this.getBubbleAt(t,o),a&&e.push(a);return e},getNextBubbleTag:function(e){var t=[],e=e||this.getRemaining();return e.forEach(function(e){-1===t.indexOf(e.tag)&&t.push(e.tag)}),2>=t.length?t[Utils.getRandomInt(0,t.length-1)]:void BubbleShoot.Bubble.getRandomSprite()},getGridMetaData:function(){for(var e=[],t=0;t<this.grid.length;t++){e[t]=[];for(var a,o=0;o<this.grid[t].length;o++)a=this.getBubbleAt(t,o),e[t][o]=a?a.getMetaData():a}return e},getMetaData:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,side:this.side,grid:this.getGridMetaData()}},returnPoints:function(){return t},secondsToTime(e){function t(e){return(10>e?'0':'')+e}var a=e%1e3;e=(e-a)/1e3;var o=e%60;e=(e-o)/60;var i=e%60,n=(e-i)/60;return t(n)+':'+t(i)+':'+t(o)+'.'+t(a)},savePoints:function(e){if('produccion'==BubbleShoot.deploy){let s=t;var a=this.secondsToTime(e);if(console.log(t+' - '+BubbleShoot.UI.infoUsuarioAPI.pointsOld),t>BubbleShoot.UI.infoUsuarioAPI.pointsOld){console.log('SEND POINTS');var i='points='+s+'&time='+a,n=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var d='https://ddbdev.co/chesterbubbleAPI/public/ranking/'+BubbleShoot.UI.infoUsuarioAPI.idAPI;else var d='https://ddbdev.co/chesterbubbleAPI2/public/ranking/'+BubbleShoot.UI.infoUsuarioAPI.idAPI;n.open('PUT',d,!0),n.setRequestHeader('Content-type','application/x-www-form-urlencoded'),n.onreadystatechange=function(){200==n.status&&4==n.readyState&&(console.log(n.responseText),BubbleShoot.UI.infoUsuarioAPI.pointsOld=s)};try{return n.send(i),t=0,o=0,!0}catch(e){return console.log(e),!1}}}else{return t=0,o=0,!0}}},e.Board=s})(BubbleShoot),function(e){function t(e,a,o,i){Phaser.Sprite.call(this,BubbleShoot.game,0,0,'sprites',i||t.getRandomSprite()),BubbleShoot.entities.bubbles.add(this),this.player=e,this.tag=this.frameName,this.scale.setTo(BubbleShoot.UI.bubble.scale),this.anchor.setTo(0.5),this.row=a,this.col=o,this.radius=BubbleShoot.UI.bubble.radius;var n=BubbleShoot.game.make.sprite(-250,-250,'chispa-'+this.frameName);n.visible=!1,this.addChild(n)}var a=Math.floor,o=['green','blue','yellow','red','magenta','orange'];t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,t.prototype.getGridByPosition=function(e){var t=this.player.side==BubbleShoot.PLAYER_SIDE_TOP,o=this.player.board,e=e||this.position,i=BubbleShoot.UI.board.separatorHeight+1,n=a((e.y-o.y)/BubbleShoot.UI.board.rowHeight);if(t)var n=a((o.height-e.y)/BubbleShoot.UI.board.rowHeight);var d=0==n%2?BubbleShoot.UI.bubble.radius:2*BubbleShoot.UI.bubble.radius,s=(e.x-o.x+d)/BubbleShoot.UI.bubble.size;return s=Math.round(s),s>BubbleShoot.UI.maxCols&&(s=BubbleShoot.UI.maxCols),1==n%2&&(s-=2),0==n%2&&(s-=1),{row:n,col:s}},t.prototype.fixGridByPosition=function(e){var t=this.getGridByPosition(e);this.row=t.row,this.col=t.col},t.prototype.savelength=function(e){this.length=e},t.prototype.getPositionByGrid=function(e){var e=e||{row:this.row,col:this.col};if(void 0===e.row||void 0===e.col)return console.error('getPositionByGrid',e.row,e.col),!1;var t=this.player.side==BubbleShoot.PLAYER_SIDE_TOP,a=BubbleShoot.UI.board.separatorHeight+1,o=this.player.board.x,i=this.player.board.height+BubbleShoot.UI.bubble.radius;return o+=0==e.row%2?BubbleShoot.UI.bubble.radius:2*BubbleShoot.UI.bubble.radius,t?i-=(e.row+1)*BubbleShoot.UI.board.rowHeight+a:i+=e.row*BubbleShoot.UI.board.rowHeight+1.5*a,{x:o+e.col*BubbleShoot.UI.bubble.size,y:i}},t.prototype.fixPositionByGrid=function(e){var t=this.getPositionByGrid(e);this.position.setTo(t.x,t.y),this.createDebugText()},t.prototype.move=function(e,t,a){if(BubbleShoot.fire=!0,console.log('Fire'),BubbleShoot.sound.shoot.play(),!1===Array.isArray(e))return console.error('invalid parameters, expected Array of steps');this.state=BubbleShoot.BUBBLE_STATE_FIRING;var a=void 0==a||a,o=BubbleShoot.game.add.tween(this);if(e.forEach(function(e){o.to({x:e.position.x,y:e.position.y},e.duration)}),a){var i=e.pop().position;this.fixGridByPosition(i),this.player.board.addBubble(this),this._endPosition=this.getPositionByGrid()}o.onComplete.add(function(){a&&(this.state=BubbleShoot.BUBBLE_STATE_ON_BOARD,this.fixPositionByGrid(),delete this._endPosition),t&&t(this)}.bind(this)),o.start()},t.prototype.getMetaData=function(){return{tag:this.tag,radius:this.radius,row:this.row,col:this.col,x:this.x,y:this.y,position:{x:this.x,y:this.y},_endPosition:this._endPosition,state:this.state}},t.prototype.createDebugText=function(){if(this.points='magenta'==this.tag||'blue'==this.tag?20:10,!BubbleShoot.debug)return!1;if(!this.debugText){var e=BubbleShoot.game.add.text(0,0,'',{font:'50px Arial',fill:'#ffffff'});e.anchor.setTo(0.5),this.addChild(e),this.debugText=e}return void 0==this.row||void 0==this.col?this.debugText.setText(''):void this.debugText.setText(this.row+' - '+(this.col+''))},t.RADIUS=177/2,t.SIZE=2*t.RADIUS,t.create=function(e,a,o,i){var n,i=i;return n&&(n.revive(),n.row=a,n.col=o,n.frameName=i,n.tag=i,n.player=e),n||(n=new t(e,a,o,i)),n.createDebugText(),n},t.getRandomSprite=function(){return o[Utils.getRandomInt(0,o.length-1)]},e.Bubble=t}(BubbleShoot);(function(e){var t=Math.abs,a=function(e){Phaser.Sprite.call(this,BubbleShoot.game,BubbleShoot.game.world.centerX,0),BubbleShoot.entities.add(this),e.shooter=this,this.player=e,this._loaded=!1,this._loading=!1,this._nextLoaded=[],this.BitmapSprite={},this.scale.setTo(0.3),this.anchor.setTo(0.5,0.75),e.side==BubbleShoot.PLAYER_SIDE_TOP&&(this.angle=179,this.y=this.height/4),e.side==BubbleShoot.PLAYER_SIDE_BOTTOM&&(this.angle=0,this.y=BubbleShoot.game.height-200)};a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.fire=function(e,t){var a=this.bubble;if(!a||!this._loaded)return!1;var t=t||BubbleShoot.Collision.trajectory(this.position,this.rotation,this.player.board);a.move(t,e),this.bubble=null},a.prototype.changeBubble=function(){if(console.log(this._nextLoaded),this._nextLoaded.length){var e=BubbleShoot.player.shooter.bubble.tag;BubbleShoot.player.shooter.bubble.tag=this._nextLoaded.shift(),BubbleShoot.player.shooter.bubble.loadTexture('sprites',BubbleShoot.player.shooter.bubble.tag),this._nextLoaded.push(e),console.log(e),this.changeAlterBubble(e)}else{BubbleShoot.player.shooter._nextLoaded.push(BubbleShoot.Bubble.getRandomSprite());var e=BubbleShoot.player.shooter.bubble.tag;BubbleShoot.player.shooter.bubble.tag=this._nextLoaded.shift(),BubbleShoot.player.shooter.bubble.loadTexture('sprites',BubbleShoot.player.shooter.bubble.tag),this._nextLoaded.push(e),console.log(e),this.changeAlterBubble(e)}},a.prototype.changeAlterBubble=function(e){BubbleShoot.alterBubble.loadTexture('sprites',e),BubbleShoot.alterBubble.tag=e},a.prototype.createAlterBubble=function(){this._nextLoaded.length?(BubbleShoot.alterBubble=BubbleShoot.Bubble.create(this.player,void 0,void 0,this._nextLoaded[0]),BubbleShoot.alterBubble.scale.setTo(0.3),BubbleShoot.alterBubble.position.set(BubbleShoot.game.world.centerX-70,BubbleShoot.game.height-150)):(BubbleShoot.player.shooter._nextLoaded.push(BubbleShoot.Bubble.getRandomSprite()),BubbleShoot.alterBubble=BubbleShoot.Bubble.create(this.player,void 0,void 0,BubbleShoot.player.shooter._nextLoaded[0]),BubbleShoot.alterBubble.scale.setTo(0.3),BubbleShoot.alterBubble.position.set(BubbleShoot.game.world.centerX-70,BubbleShoot.game.height-150))},a.prototype.getBitmapData=function(){return this.bmd||(this.bmd=BubbleShoot.game.add.bitmapData(this.player.board.width,BubbleShoot.UI.height),this.BitmapSprite=BubbleShoot.game.add.sprite(this.player.board.x,this.player.board.y,this.bmd),BubbleShoot.entities.add(this.BitmapSprite)),this.bmd},a.prototype.showTrajectory=function(e){var t=BubbleShoot.Collision.trajectory(this.position,this.rotation,this.player.board);this.BitmapSprite.visible=!!e;var a=this.getBitmapData(),o=a.context,i=this.player.board;a.clear(),o.beginPath(),o.strokeStyle='white',o.lineWidth=10,o.setLineDash([15]),o.moveTo(this.position.x-i.x,this.position.y-i.y),t.forEach(function(e){o.lineTo(e.position.x-i.x,e.position.y-i.y)}.bind(this)),o.stroke(),o.strokeStyle='rgb(168, 133, 264',o.lineWidth=6,o.stroke(),o.lineWidth=3,o.strokeStyle='rgb(72, 204, 254)',o.globalAlpha=0.5,o.stroke()},a.prototype.showTrajectoryNew=function(){var e=BubbleShoot.game.make.sprite(0,0,'plop40'),t=this.player.board,a=BubbleShoot.Collision.trajectory(this.position,this.rotation,this.player.board),o=this.getBitmapData(),i=o.context;o.smoothed=!1,a.forEach(function(){o.draw(0,100)}.bind(this)),i.stroke()},a.prototype.reload=function(e){if(this.bubble||this._loading)return!1;this._loading=!0,this._loaded=!1;var t=BubbleShoot.Bubble.create(this.player,void 0,void 0,this._nextLoaded.shift());t.anchor.setTo(0.5),t.position.set(this.x,this.y);var a=function(){this.bubble=t,this._loading=!1,this._loaded=!0};if(e)return a.call(this);var o=BubbleShoot.UI.bubble.scale;t.scale.setTo(1e-3);var i=BubbleShoot.game.add.tween(t.scale);return i.to({x:o,y:o},333),i.onComplete.add(a.bind(this)),i.start(),!0},a.prototype.setRotation=function(e){this.rotation=e,this.player.side==BubbleShoot.PLAYER_SIDE_BOTTOM&&55<t(this.angle)&&(this.angle=0<this.angle?55:-55),this.player.side==BubbleShoot.PLAYER_SIDE_TOP&&50>t(this.angle)&&(this.angle=0<this.angle?55:-55)},a.prototype.getMetaData=function(){return{x:this.x,y:this.y,position:{x:this.x,y:this.y},rotation:this.rotation}},e.Shooter=a})(BubbleShoot);(function(e){function t(e,t){this.id=e,this.side=t,this.shooter=new BubbleShoot.Shooter(this),this.board=new BubbleShoot.Board(this)}t.prototype={getMetaData:function(){return{id:this.id,side:this.side,shooter:this.shooter.getMetaData(),board:this.board.getMetaData()}},fire:function(e,t){12<BubbleShoot.player.board.grid.length&&BubbleShoot.player.board.grid[12].map(function(e){e!=void 0&&(lose=!0)});this.shooter.fire(function(t){var a=!1;if((this.side==BubbleShoot.PLAYER_SIDE_BOTTOM&&t.y+t.radius>this.shooter.y-this.shooter.height/2||this.side==BubbleShoot.PLAYER_SIDE_TOP&&t.y-t.radius<this.shooter.y+this.shooter.height/2)&&(a=!0),!a){this.board.checkMatches(t),this.board.checkOrphans();var o=this.board.getRemaining();if(console.log('Choca'),setTimeout(function(){BubbleShoot.textPuntos.text=BubbleShoot.player.board.returnPoints(),BubbleShoot.textPuntos.updateText(),BubbleShoot.textPuntos.dirty=!1},null),0==o.length){BubbleShoot.sound.win.play(),BubbleShoot.entities=BubbleShoot.game.add.group();var i=BubbleShoot.game.add.group();i.enableBody=!0,BubbleShoot.entities.add(i),BubbleShoot.entities.bubbles=i,BubbleShoot.entities.bringToTop(BubbleShoot.entities.bubbles);var n=Math.round(BubbleShoot.UI.maxRows),d=BubbleShoot.UI.maxCols;BubbleShoot.player.board.createGrid(n,d),BubbleShoot.player.board.createBubbles()}}!1,a&&BubbleShoot.CurrenteState.finish(this.enemy),e&&e()}.bind(this),t),this.shooter.reload(),BubbleShoot.player.shooter._nextLoaded.push(BubbleShoot.Bubble.getRandomSprite()),this.shooter.changeAlterBubble(BubbleShoot.player.shooter._nextLoaded[0])}},e.Player=t})(BubbleShoot),function(e){var t={config:{gameWidth:0,bubbleRadius:0,trajectory:{distance:0,duration:600}},circleCollision:function(e,t,a){var o=this.circleCollisionDistance(e.position,t.position),i=e.radius+t.radius;return a&&(i-=e.radius*a+t.radius*a),o<i},circleCollisionDistance:function(e,t){var a=e.x-t.x,o=e.y-t.y;return Math.sqrt(a*a+o*o)},bubbleIntersection:function(e,a){for(var o,i=0;i<a.length;i++)if(o=a[i],!!o)for(var n,d=0;d<o.length;d++)if(n=o[d],!!n){var s=n.position;n.state==BubbleShoot.BUBBLE_STATE_FIRING&&(s=n._endPosition);var r=t.circleCollision({position:e.position,radius:e.radius},{position:s,radius:n.radius},0.1);if(r)return n}return!1}};(function(e){function a(e,o,i,n,d){var s=t.config.bubbleRadius,r=n.side==BubbleShoot.PLAYER_SIDE_TOP,l=t.config.gameWidth-s,g=s,p=n.y+s;r&&(p=n.y+n.height-s);var d=d?++d:1,u=!1,m=!1;if(e.x+=o,e.y-=i,!r&&e.y<=p&&(e.y=p,u='top'),r&&e.y>=p&&(e.y=p,u='top'),e.x<=g&&(e.x=g,u='left'),e.x>=l&&(e.x=l,u='right'),d>2e3)return console.error('Collision.Trajectory.step atingiu limit de iteracoes'),e;if(m=t.bubbleIntersection({position:e,radius:t.config.bubbleRadius},n.grid),u||m){var c=d*t.config.trajectory.distance,h=Math.round(c/1500*1e3);return{position:{x:e.x,y:e.y},duration:h,collision:{dist:c,worldBounds:u,bubble:m}}}return a(e,o,i,n,d)}e.trajectory=function(e,o,i){for(var n=[],d={x:e.x,y:e.y},s=Math.sin(o)*t.config.trajectory.distance,r=Math.cos(o)*t.config.trajectory.distance,n=[],l=0;;){l++;var g=a(d,s,r,i);if(g.collision.worldBounds&&(s*=-1),g.angle=o,n.push(g),l>2e3){console.error('while limit');break}if(!g||g.collision.bubble||'top'==g.collision.worldBounds)break}return n}})(t),e.Collision=t}(BubbleShoot),function(e){var t=Math.min,a=9,o=BubbleShoot.Bubble.SIZE,i=BubbleShoot.Bubble.SIZE,n=t(window.innerWidth,window.innerHeight),d=t(window.innerWidth,2*n),n=586,s=n,r=s/o/a,l=BubbleShoot.Bubble.SIZE*r,g={gameApiInst:{},contadorSlides:0,background:'#fff',width:n,height:1024,maxRows:4,maxCols:a,bubble:{scale:r,size:l,radius:l/2},board:{width:s,height:0,rowHeight:l-9,separatorHeight:2},createComojugar:function(){this.modal=BubbleShoot.game.add.sprite(0,0,'modal'),this.modal.alpha=0;var e={font:'90px din_condensedbold',fill:'#fff',align:'center',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300};this.mecGroup=BubbleShoot.game.add.group(),this.modal.scale.setTo(0.7),this.modal.y=BubbleShoot.game.world.height/2-this.modal.height/2,this.modal.x=BubbleShoot.game.world.width/2-this.modal.width/2;var t=BubbleShoot.game.add.sprite(0,0,'mec2'),a=BubbleShoot.game.add.sprite(0,0,'mec6'),o=BubbleShoot.game.add.sprite(0,0,'mec8'),i=BubbleShoot.game.add.sprite(0,0,'mec10'),n=BubbleShoot.game.add.sprite(0,0,'animMec2'),d=BubbleShoot.game.make.sprite(0,0,'animMec2P');d.visible=!1;var s=BubbleShoot.game.add.sprite(0,0,'animMec3'),r=BubbleShoot.game.make.sprite(0,0,'animMec3P');r.visible=!1;var l=BubbleShoot.game.add.sprite(0,0,'animMec4'),g=BubbleShoot.game.make.sprite(0,0,'animMec4P');g.visible=!1;var p=BubbleShoot.game.add.sprite(0,0,'animMec4'),u=BubbleShoot.game.make.sprite(0,0,'animMec4P');u.visible=!1,this.cerrar=BubbleShoot.game.add.button(0,0,'icocerrar');var m=BubbleShoot.game.world.height/2-t.height/2,c=BubbleShoot.game.world.width/2-t.width/2;t.position.set(c,m),a.position.set(c,m),o.position.set(c,m),i.position.set(c,m),n.position.set(c+60,m+180.5),d.position.set(c+60,m+180.5),t.addChild(n),t.addChild(d),s.position.set(c+60,m+180.5),r.position.set(c+60,m+180.5),a.addChild(s),a.addChild(r),l.position.set(c+60,m+180.5),g.position.set(c+60,m+180.5),o.addChild(l),o.addChild(g),p.position.set(c+60,m+180.5),u.position.set(c+60,m+180.5),i.addChild(p),i.addChild(u),this.cerrar.position.set(BubbleShoot.game.world.width/2-this.cerrar.width/2+210,120),this.mecGroup.add(t),this.mecGroup.add(a),this.mecGroup.add(o),this.mecGroup.add(i),this.mecGroup.forEach(function(e){e.visible=!1}),this.contadorSlides=0,this.mecGroup.children[this.contadorSlides].visible=!0,this.modal.inputEnabled=!0,this.buttonRight=BubbleShoot.game.add.button(0,0,'icoright'),this.buttonRight.y=0.7*BubbleShoot.game.world.height-0.7*this.buttonRight.height,this.buttonRight.x=BubbleShoot.game.world.width/2-this.buttonRight.width/2+200,this.buttonRight.tag='right',this.buttonLeft=BubbleShoot.game.add.button(0,0,'icoleft'),this.buttonLeft.y=0.7*BubbleShoot.game.world.height-0.7*this.buttonLeft.height,this.buttonLeft.x=BubbleShoot.game.world.width/2-this.buttonLeft.width/2-200,this.buttonLeft.tag='left',this.buttonLeft.visible=!1,this.modal.events.onInputDown.add(this.lockInput,this),this.buttonLeft.events.onInputDown.add(this.showSlide,this),this.buttonRight.events.onInputDown.add(this.showSlide,this),this.cerrar.events.onInputDown.add(this.destroyComojugar,this),this.buttonJ=BubbleShoot.game.add.button(0,0,'botonModal'),this.buttonJ.scale.setTo(0.68),this.buttonJ.alpha=0.6,this.buttonJ.y=0.84*BubbleShoot.game.world.height-0.84*this.buttonJ.height,this.buttonJ.x=BubbleShoot.game.world.width/2-this.buttonJ.width/2,e.font='40px din_condensedbold',this.textd=BubbleShoot.game.add.text(0,0,'JUGAR',e),this.textd.y=0.835*BubbleShoot.game.world.height-0.835*this.textd.height,this.textd.x=BubbleShoot.game.world.width/2-this.textd.width/2,this.buttonJ.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.game.state.start('game')},this)},lockInput:function(){console.log('Lock')},showSlide:function(e){if(console.log(),console.log(e.tag),'left'==e.tag?(console.log('lefttttttt'),this.contadorSlides--):this.contadorSlides++,0==this.contadorSlides?(this.buttonLeft.visible=!1,this.contadorSlides=0,this.buttonRight.visible=!0):this.buttonLeft.visible=!0,this.buttonRight.visible=this.contadorSlides!=this.mecGroup.children.length-1,this.mecGroup.forEach(function(e){e.visible=!1}),this.mecGroup.children[this.contadorSlides].visible=!0,this.mecGroup.children[this.contadorSlides].children.length){var t=this.mecGroup.children[this.contadorSlides].children;this.animateMecanica(t)}},animateMecanica(e){e[1].visible=!1,e[0].visible=!0;var t=e[0].animations.add('animar');e[0].animations.play('animar',30,!1);var a=this;t.onComplete.add(function(){e[0].visible=!1,e[1].visible=!0;var t=e[1].animations.add('animarp');e[1].animations.play('animarp',30,!1),t.onComplete.add(function(){a.animateMecanica(e)})})},destroyComojugar:function(){this.mecGroup.forEach(function(e){e.kill()}),this.textd.kill(),this.buttonJ.kill(),this.modal.kill(),this.cerrar.kill(),this.buttonRight.kill(),this.buttonLeft.kill(),this.contadorSlides=0,this.clickSound()},destroyMecanica:function(){this.modal.kill(),this.cerrar.kill(),this.mecanicaGroup.forEach(function(e){e.kill()}),this.clickSound()},createMecanica:function(){this.mecanicaGroup=BubbleShoot.game.add.group(),this.modal=BubbleShoot.game.add.image(0,0,'backGame2'),this.modal.inputEnabled=!0,this.modal.events.onInputDown.add(function(){return!1},this),this.modal.y=BubbleShoot.game.world.height/2-this.modal.height/2,this.modal.x=BubbleShoot.game.world.width/2-this.modal.width/2,this.cerrar=BubbleShoot.game.add.button(0,0,'icocerrar'),this.cerrar.position.set(BubbleShoot.game.world.width/2-this.cerrar.width/2+232,86),this.cerrar.events.onInputDown.add(this.destroyMecanica,this);var e={font:'90px din_condensedbold',fill:'#fff',align:'center',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300,font:'60px din_condensedbold'},t=BubbleShoot.game.add.text(0,0,'T\xC9RMINOS & CONDICIONES',e);t.y=80,t.x=BubbleShoot.game.world.width/2-t.width/2,e.font='23px din_condensedbold',e.wordWrapWidth=520,templateText=1==BubbleShoot.UI.reg?`El juego estará disponible exclusivamente para Los Propios, desde el 12 de febrero hasta el 30 de marzo de 2018
Recibirás 60 puntos la primera vez que juegues. 
Puedes jugar todas las veces que quieras para mejorar tu posición, pero solo se tendrá en cuenta para el ranking el mejor alcanzado en el menor tiempo.  
El juego tiene solamente un nivel y las cápsulas aparecerán de forma aleatoria.    
El objetivo del juego es unir 3 o más cápsulas del mismo color o crear combinaciones para obtener puntos (las cápsulas se pueden unir de forma horizontal, vertical o diagonal)
Ve al botón “¿Cómo Jugar?” en el inicio para saber cómo sumar puntos en el juego.
Si en 3 lanzamientos no logras unir cápsulas del mismo color, las cápsulas del tablero bajarán progresivamente.
Si las cápsulas del tablero llegan a la línea horizontal que está en la parte inferior de la pantalla, perderás la partida.
Si estás entre los mejores 10 puntajes de tu regional, el 30 de marzo a las 14:00, recibirás 1.000 puntos en tu cuenta www.lospropios.net.
Por ningún motivo el reconocimiento será entregado en dinero en efectivo.`:`El juego estará disponible exclusivamente para Los Propios desde el 12 de febrero hasta el 30 de marzo de 2018
Recibirás 60 puntos la primera vez que juegues.
Puedes jugar todas las veces que quieras para mejorar tu posición, pero solo se tendrá en cuenta para el ranking el mejor puntaje alcanzado en el menor tiempo.
El juego tiene solamente un nivel y las cápsulas aparecerán de forma aleatoria.
El objetivo del juego es unir 3 o más cápsulas del mismo color para obtener puntos (las cápsulas se pueden unir de forma horizontal, vertical o diagonal)
Ve al botón “¿Cómo Jugar?” en el inicio para saber cómo sumar puntos en el juego.
Si en 3 lanzamientos no logras unir cápsulas del mismo color, las cápsulas del tablero bajarán progresivamente.
Si las cápsulas del tablero llegan a la linea horizontal que está en la parte inferior de la pantalla, perderás la partida.
Si estás entre los mejores 10 puntajes de tu regional el 30 de marzo a las 14:00, recibirás 1.500 puntos en tu cuenta www.lospropios.net.
Por ningún motivo el reconocimiento será entregado en dinero en efectivo.`;var a=BubbleShoot.game.add.text(0,0,templateText,e);a.y=0.8*BubbleShoot.game.world.height-0.8*a.height,a.x=BubbleShoot.game.world.width/2-a.width/2,this.mecanicaGroup.add(this.modal),this.mecanicaGroup.add(t),this.mecanicaGroup.add(a)},clickSound:function(){BubbleShoot.sound.clic.play()},changeBack:function(){document.getElementById('backDeskNorm').style.cssText='z-index:0',document.getElementById('backDeskGame').style.cssText='z-index:1'},changeBack2:function(){document.getElementById('backDeskNorm').style.cssText='z-index:1',document.getElementById('backDeskGame').style.cssText='z-index:0'},reg:3,gameApi:{getUserInformation:()=>{g.gameApiInst.getUserInformation();var e=new Promise((e,t)=>{g.gameApiInst.onSuccess=(t)=>{e(t)},g.gameApiInst.onError=(e)=>{t(e)}});return e},createGameSession:()=>{g.gameApiInst.createGameSession();var e=new Promise((e,t)=>{g.gameApiInst.onSuccess=(t)=>{e(t)},g.gameApiInst.onError=(e)=>{t(e)}});return e},getGameSession:(e)=>{g.gameApiInst.getGameSession(e);var t=new Promise((e,t)=>{g.gameApiInst.onSuccess=(t)=>{e(t)},g.gameApiInst.onError=(e)=>{t(e)}});return t},sendPoints:(e)=>{g.gameApiInst.sendPoints(e);var t=new Promise((e,t)=>{g.gameApiInst.onSuccess=(t)=>{e(t)},g.gameApiInst.onError=(e)=>{t(e)}});return t}}};BubbleShoot.UI=g,'produccion'==BubbleShoot.deploy&&(BubbleShoot.UI.gameApiInst=new GameAPI,console.log(BubbleShoot.UI.gameApiInst)),e.UI=g}(BubbleShoot),function(e){function t(e){this.player=e,this.service=new BubbleShoot.Background('ai'),this.state='bootstrap';var t={bubbleRadius:BubbleShoot.UI.bubble.radius,gameWidth:BubbleShoot.game.width},a=[this.player.getMetaData(),t];this.service.execute('bootstrap',a,this.tick,this)}t.prototype.stop=function(){return this.state='stop',clearTimeout(this.timer)},t.prototype.tick=function(){clearTimeout(this.timer),'stop'!=this.state&&(this.timer=setTimeout(this.update.bind(this),1500))},t.prototype.update=function(){return'updating'!=this.state&&this.player.shooter.bubble?void(this.state='updating',this.fire(function(){this.updateGrid(function(){'stop'!=this.state&&(this.state='updated'),this.tick()})})):this.tick()},t.prototype.updateGrid=function(e){this.service.execute('updateGrid',[this.player.board.getGridMetaData()],e,this)},t.prototype.fire=function(e){this.service.execute('findBestAgle',[this.player.shooter.bubble.tag],function(t){var a=this.player.shooter.rotation-t.rotation;this.player.shooter.rotation<t.rotation&&(a=t.rotation-this.player.shooter.rotation);var o=Math.round(1e3*a/2e3*1e3);0>=o&&(o=50);var i=BubbleShoot.game.add.tween(this.player.shooter);i.to({rotation:t.rotation},o),i.onComplete.add(function(){this.player.fire(e.bind(this),t.trajectory)}.bind(this)),i.start()},this)},t.prototype.randomMove=function(){var e=33,t=Math.abs(this.player.shooter.angle),t=180,a=Math.max(95,t-e),o=Math.min(265,t+e),i={angle:Utils.getRandomInt(a,o)};i.rotation=Utils.degreesToRadians(i.angle);var n=BubbleShoot.game.add.tween(this.player.shooter);n.to({rotation:i.rotation},1e3),n.onComplete.add(function(){this.randomMove()},this),n.start()},e.AI=t}(BubbleShoot);(function(e){'use strict';var t=function(e){this.game=e};t.prototype={create:function(){this.game.stage.disableVisibilityChange=!0,BubbleShoot.UI.changeBack(),BubbleShoot.CurrenteState=this,BubbleShoot.state='stated',this.background=BubbleShoot.game.add.image(0,0,'backGame'),this.background.inputEnabled=!0,this.boardShoot=BubbleShoot.game.add.image(0,BubbleShoot.game.height-260,'shooterx'),BubbleShoot.spinBtn=BubbleShoot.game.add.button(0,0,'spin'),BubbleShoot.spinBtn.position.set(BubbleShoot.game.world.centerX+20,BubbleShoot.game.height-190),BubbleShoot.spinBtn.scale.setTo(0.5),BubbleShoot.spinBtn.events.onInputDown.add(this.changeBubble,this),this.game.device.touch||(BubbleShoot.spinBtn.events.onInputOver.add(function(){this.boardShoot.loadTexture('shooterxHov')},this),BubbleShoot.spinBtn.events.onInputOut.add(function(){this.boardShoot.loadTexture('shooterx')},this)),this.game.time.advancedTiming=!0,BubbleShoot.fire=!0,BubbleShoot.entities=BubbleShoot.game.add.group();var e=BubbleShoot.game.add.group();e.enableBody=!0,BubbleShoot.entities.add(e),BubbleShoot.entities.bubbles=e,BubbleShoot.isTouch=this.game.device.touch,console.log(BubbleShoot.isTouch),this.createPlayers(function(){this.configureCollision(),this.createTablero(),this.attachEvents()}),BubbleShoot.entities.bringToTop(BubbleShoot.entities.bubbles),this.timerGame=this.game.time.create(!1),this.timerGame.loop(1,this.cronometro,this),this.timerGame.loop(1e3,this.updateTextTime,this),this.timerGame.start(),BubbleShoot.sessionTime='00:00',this.horas=0,this.centesimas=0,this.segundos=0,this.minutos=0,this.totalSegundos=0;BubbleShoot.timeText=this.game.add.text(0,0,'00:00',{font:'38px din_condensedbold',fill:'#fff',align:'left',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300}),BubbleShoot.timeText.setTextBounds(70,20,135,53),BubbleShoot.sound.shoot=this.game.add.sound('launch'),BubbleShoot.sound.explosion=this.game.add.sound('explosion'),BubbleShoot.sound.fail=this.game.add.sound('fail'),BubbleShoot.sound.win=this.game.add.sound('win'),BubbleShoot.sound.goodjob=this.game.add.sound('goodjob'),BubbleShoot.animations={},BubbleShoot.animations.mentol=BubbleShoot.game.add.sprite(-250,-250,'mentol'),BubbleShoot.animations.mentol.visible=!1,BubbleShoot.animations.mentol.y=this.world.height/2-BubbleShoot.animations.mentol.height/2,BubbleShoot.animations.mentol.x=this.world.width/2-BubbleShoot.animations.mentol.width/2,BubbleShoot.animations.purpleX2=BubbleShoot.game.add.sprite(-250,-250,'purplex2'),BubbleShoot.animations.purpleX2.visible=!1,BubbleShoot.animations.purpleX2.y=this.world.height/2-BubbleShoot.animations.purpleX2.height/2,BubbleShoot.animations.purpleX2.x=this.world.width/2-BubbleShoot.animations.purpleX2.width/2,BubbleShoot.animations.sabor=BubbleShoot.game.add.sprite(-250,-250,'sabor'),BubbleShoot.animations.sabor.visible=!1,BubbleShoot.animations.sabor.y=this.world.height/2-BubbleShoot.animations.sabor.height/2,BubbleShoot.animations.sabor.x=this.world.width/2-BubbleShoot.animations.sabor.width/2},updateTextTime(){setTimeout(function(){BubbleShoot.timeText.text=BubbleShoot.sessionTime,BubbleShoot.timeText.updateText(),BubbleShoot.timeText.dirty=!1},null)},cronometro:function(){59>this.centesimas&&this.centesimas++,59==this.centesimas&&(this.centesimas=-1),0==this.centesimas&&(this.segundos++,this.totalSegundos++,BubbleShoot.sessionTime=10>this.segundos&&10>this.minutos?'0'+this.minutos+':0'+this.segundos:10>this.segundos?this.minutos+':0'+this.segundos:10>this.minutos?'0'+this.minutos+':'+this.segundos:this.minutos+':'+this.segundos),59==this.segundos&&(this.segundos=-1),0==this.centesimas&&0==this.segundos&&this.minutos++,59==this.minutos&&(this.minutos=-1),0==this.centesimas&&0==this.segundos&&0==this.minutos&&this.horas++,BubbleShoot.totalSegundos=1e3*parseFloat(this.totalSegundos+'.'+this.centesimas)},createPlayers:function(e){if(BubbleShoot.mode==BubbleShoot.MODES.SINGLEPLAYER){BubbleShoot.player=new BubbleShoot.Player('You',BubbleShoot.PLAYER_SIDE_BOTTOM);var t=Math.round(BubbleShoot.UI.maxRows),a=BubbleShoot.UI.maxCols;return BubbleShoot.player.board.createGrid(t,a),BubbleShoot.player.board.createBubbles(),BubbleShoot.player.shooter.showTrajectory(!1),BubbleShoot.player.shooter.reload(!0),BubbleShoot.player.enemy=BubbleShoot.enemy,BubbleShoot.player.shooter.createAlterBubble(),e.call(this)}},changeBubble:function(){BubbleShoot.player.shooter.changeBubble()},createTablero:function(){BubbleShoot.tablero=this.game.add.button(0,0,'tablero');BubbleShoot.textPuntos=this.game.add.text(0,0,'0',{font:'38px din_condensedbold',fill:'#fff',align:'left',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300}),BubbleShoot.textPuntos.setTextBounds(345,20,135,53),BubbleShoot.tablero.onInputDown.add(function(){this.createPause(),BubbleShoot.tablero.loadTexture('tablero-press')},this),BubbleShoot.player.board.createLifes()},createPause:function(){BubbleShoot.UI.clickSound(),BubbleShoot.state='pause',this.timerGame.paused=!0,this.detachEvents(),this.createModalLayer()},configureCollision:function(){var e=BubbleShoot.Collision.config;e.bubbleRadius=BubbleShoot.UI.bubble.radius,e.trajectory.distance=BubbleShoot.UI.bubble.radius/5,e.trajectory.duration=600,e.gameWidth=BubbleShoot.game.width},attachEvents:function(){BubbleShoot.tablero.inputEnabled=!0,this.game.input.addMoveCallback(this.inputMove,this),this.background.events.onInputDown.add(this.inputDown,this),this.background.events.onInputUp.add(this.inputUp,this),this.game.canvas.style.cursor='crosshair'},detachEvents:function(){BubbleShoot.tablero.inputEnabled=!1,this.game.input.deleteMoveCallback(this.inputMove,this),this.background.events.onInputUp.remove(this.inputUp,this),this.game.canvas.style.cursor='default'},update:function(){12<BubbleShoot.player.board.grid.length;var e=this;12<BubbleShoot.player.board.grid.length&&BubbleShoot.player.board.grid[12].map(function(t){t!=void 0&&e.finish()}),BubbleShoot.fire?BubbleShoot.player.shooter.showTrajectory(!1):BubbleShoot.player.shooter.showTrajectory(!0)},render:function(){BubbleShoot.game.debug.geom(BubbleShoot.pause,'#0fffff')},inputDown:function(){BubbleShoot.fire=!1},inputUp:function(){BubbleShoot.fire=!0,'finished'!=BubbleShoot.state&&'pause'!=BubbleShoot.state&&BubbleShoot.player.fire()},inputMove:function(){var e=this.game.physics.arcade.angleToPointer(BubbleShoot.player.shooter);e+=1.57079633,BubbleShoot.player.shooter.setRotation(e)},finish:function(){return'finished'!=BubbleShoot.state&&void(BubbleShoot.sound.fail.play(),BubbleShoot.state='finished',this.timerGame.stop(),this.detachEvents(),this.createModalLayer(),BubbleShoot.player.board.savePoints(BubbleShoot.totalSegundos))},createModalLayer:function(){this.detachEvents(),BubbleShoot.spinBtn.inputEnabled=!1;var e=this.game.add.group(),t=this.add.sprite(0,0,'modal');t.scale.setTo(0.7),this.background.inputEnabled=!1,t.y=this.world.height/2-t.height/2,t.x=this.world.width/2-t.width/2;var a={font:'90px din_condensedbold',fill:'#fff',align:'center',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300},o=this.game.add.button(0,0,'icoinicio');o.scale.setTo(1.2),o.alpha=0.6,o.y=0.7*this.world.height-0.7*o.height,o.x=this.world.width/2-o.width/2-200;var i=this.game.add.button(0,0,'icoranking');i.scale.setTo(1.2),i.alpha=0.6,i.y=0.7*this.world.height-0.7*i.height,i.x=this.world.width/2-i.width/2-70;var n=this.game.add.button(0,0,'icomecanica');n.scale.setTo(1.2),n.alpha=0.6,n.y=0.7*this.world.height-0.7*n.height,n.x=this.world.width/2-n.width/2+70;var d=this.game.add.button(0,0,'icosonido');if(d.scale.setTo(1.2),d.alpha=0.6,d.y=0.7*this.world.height-0.7*d.height,d.x=this.world.width/2-d.width/2+200,'pause'==BubbleShoot.state){var s=this.game.add.text(0,0,'PAUSA',a);s.y=250,s.x=this.world.width/2-s.width/2,a.font='35px din_condensedbold';var r=this.game.add.image(0,0,'icopause');r.y=420,r.x=this.world.width/2-r.width/2;var l=this.game.add.button(0,0,'botonModal');l.scale.setTo(0.7),l.alpha=0.2,l.y=0.84*this.world.height-0.84*l.height,l.x=this.world.width/2-l.width/2,a.font='40px din_condensedbold',this.text5=this.game.add.text(0,0,'CONTINUAR JUGANDO',a),this.text5.y=0.835*this.world.height-0.835*this.text5.height,this.text5.x=this.world.width/2-this.text5.width/2,e.add(t),e.add(s),e.add(r),e.add(l),e.add(this.text5),l.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.tablero.loadTexture('tablero'),e.forEach(function(e){BubbleShoot.game.add.tween(e).to({alpha:0},300,'Linear',!0,0)}),BubbleShoot.state='running',this.timerGame.paused=!1,BubbleShoot.spinBtn.inputEnabled=!0,l.destroy(),i.destroy(),o.destroy(),n.destroy(),d.destroy(),this.attachEvents(),this.background.inputEnabled=!0},this)}else{a.font='45px din_condensedbold';var s=this.game.add.text(0,0,'OUCH',a);s.y=160,s.x=this.world.width/2-s.width/2,a.font='35px din_condensedbold',a.wordWrapWidth=500;var g=this.game.add.text(0,0,'Vuelve a empezar y mejora tu puntaje',a);g.y=this.world.height/4-g.height/4,g.x=this.world.width/2-g.width/2,a.font='60px din_condensedbold';var p=this.game.add.text(0,0,BubbleShoot.player.board.returnPoints(),a);p.y=0.4*this.world.height-0.4*p.height,p.x=this.world.width/2-p.width/2,a.font='26px din_condensedbold';var u=this.game.add.text(0,0,'PUNTOS',a);u.y=0.45*this.world.height-0.45*u.height,u.x=this.world.width/2-u.width/2;var l=this.game.add.button(0,0,'botonModal');l.scale.setTo(0.68),l.alpha=0.6,l.y=0.84*this.world.height-0.84*l.height,l.x=this.world.width/2-l.width/2,a.font='45px din_condensedbold',this.text5=this.game.add.text(0,0,'VOLVER A JUGAR',a),this.text5.y=0.84*this.world.height-0.84*this.text5.height,this.text5.x=this.world.width/2-this.text5.width/2,e.add(t),e.add(s),e.add(g),e.add(p),e.add(u),e.add(l),e.add(this.text5),l.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.player.board.savePoints(BubbleShoot.totalSegundos),BubbleShoot.tablero.loadTexture('tablero-press'),this.game.state.start('game')},this)}this.text5.alpha=0.6,l.events.onInputOver.add(this.hoverBtnx,this),l.events.onInputOut.add(this.unHoverBtnx,this),o.events.onInputOver.add(this.hoverBtn,this),o.events.onInputOut.add(this.unHoverBtn,this),i.events.onInputOver.add(this.hoverBtn,this),i.events.onInputOut.add(this.unHoverBtn,this),n.events.onInputOver.add(this.hoverBtn,this),n.events.onInputOut.add(this.unHoverBtn,this),d.events.onInputOver.add(this.hoverBtn,this),d.events.onInputOut.add(this.unHoverBtn,this),i.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.player.board.savePoints(BubbleShoot.totalSegundos),this.state.start('ranking')},this),o.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.player.board.savePoints(BubbleShoot.totalSegundos),this.game.state.start('menu')},this),n.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.UI.createMecanica()},this),d.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.game.sound.mute=!BubbleShoot.game.sound.mute,BubbleShoot.game.sound.mute?d.loadTexture('icosonidoPause'):d.loadTexture('icosonido')},this)},hoverBtn:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.8},300,'Linear',!0,0)},unHoverBtn:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.6},300,'Linear',!0,0)},hoverBtnx:function(e){var t=BubbleShoot.game.add.tween(this.text5).to({alpha:0.8},300,'Linear',!0,0),a=BubbleShoot.game.add.tween(e).to({alpha:0.8},300,'Linear',!0,0)},unHoverBtnx:function(e){var t=BubbleShoot.game.add.tween(this.text5).to({alpha:0.6},300,'Linear',!0,0),a=BubbleShoot.game.add.tween(e).to({alpha:0.6},300,'Linear',!0,0)}},e.Game=t})(this,BubbleShoot),function(e){var t=function(e){this.game=e};t.prototype={create:function(){BubbleShoot.UI.changeBack2(),BubbleShoot.mode=BubbleShoot.MODES.SINGLEPLAYER,this.background=BubbleShoot.game.add.image(0,0,'intro'),this.background.width=this.world.width,this.background.height=this.world.height;var e={font:'45px din_alternatebold',fill:'#fff',align:'center',boundsAlignH:'right',boundsAlignV:'middle'},t=this.add.button(0,0,'botonModal');t.scale.setTo(0.85),t.alpha=0.6,t.y=0.54*this.world.height-0.54*t.height,t.x=this.world.width/2-t.width/2,e.font='40px din_condensedbold',this.text5=this.add.text(0,0,'JUGAR',e),this.text5.y=0.54*this.world.height-0.54*this.text5.height,this.text5.x=this.world.width/2-this.text5.width/2;var a=this.add.button(0,0,'botonModal');a.scale.setTo(0.85),a.alpha=0.66,a.y=0.66*this.world.height-0.66*a.height,a.x=this.world.width/2-a.width/2,e.font='40px din_condensedbold',this.text8=this.add.text(0,0,'\xBFC\xD3MO JUGAR?',e),this.text8.y=0.66*this.world.height-0.66*this.text8.height,this.text8.x=this.world.width/2-this.text8.width/2;var o=this.add.button(0,0,'icomecanica');o.scale.setTo(1.1),o.alpha=0.6,o.y=0.8*this.world.height-0.8*o.height,o.x=this.world.width/2-o.width/2-138;var i=this.add.button(0,0,'icoranking');i.scale.setTo(1.1),i.alpha=0.6,i.y=0.8*this.world.height-0.8*i.height,i.x=this.world.width/2-i.width/2+140,t.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),this.state.start('game')},this),i.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),this.state.start('ranking')},this),a.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.UI.createComojugar()},this),o.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.UI.createMecanica()},this),t.events.onInputOver.add(this.hoverBtnx,this),t.events.onInputOut.add(this.unHoverBtnx,this),o.events.onInputOver.add(this.hoverBtn,this),o.events.onInputOut.add(this.unHoverBtn,this),i.events.onInputOver.add(this.hoverBtn,this),i.events.onInputOut.add(this.unHoverBtn,this),a.events.onInputOver.add(this.hoverBtn,this),a.events.onInputOut.add(this.unHoverBtn,this)},hoverBtn:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.8},300,'Linear',!0,0)},unHoverBtn:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.6},300,'Linear',!0,0)},hoverBtnx:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.8},300,'Linear',!0,0)},unHoverBtnx:function(e){BubbleShoot.game.add.tween(e).to({alpha:0.6},300,'Linear',!0,0)},startFullScreen:function(){this.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.startFullScreen(!1)}},e.Menu=t}(this),function(e){var t=function(e){this.game=e};t.prototype={preload:function(){this.game.stage.disableVisibilityChange=!0;var e=this.add.sprite(0,0,'loading');e.scale.setTo(0.3),e.y=this.world.height/2-e.height/2,e.x=this.world.width/2-e.width/2;e.animations.add('start');e.animations.play('start',30,!0),this.load.atlasJSONHash('sprites',assetsPath+'/img/sprites3.png',assetsPath+'/json/sprites.json'),this.load.image('tablero',assetsPath+'/img/tablero.png'),this.load.image('tablero-press',assetsPath+'/img/tablero-press.png'),this.game.device.touch?this.load.image('shooterx',assetsPath+'/img/shooter.png'):(this.load.image('shooterxHov',assetsPath+'/img/shooter.png'),this.load.image('shooterx',assetsPath+'/img/shooterMovil.png')),this.load.image('spin',assetsPath+'/img/spin.png'),this.load.image('backGame2',assetsPath+'/img/back2.png'),this.load.image('backGame',assetsPath+'/img/back.png'),this.load.image('plop40',assetsPath+'/img/plop40.png'),this.load.image('plop20',assetsPath+'/img/plop20.png'),this.load.image('plop10',assetsPath+'/img/plop10.png'),this.load.image('modal',assetsPath+'/img/modal.png'),this.load.image('intro',assetsPath+'/img/intro.png'),this.load.image('barra',assetsPath+'/img/barra.png'),this.load.image('icocerrar',assetsPath+'/img/icocerrar.png'),this.load.image('icoinicio',assetsPath+'/img/icoinicio.png'),this.load.image('icomecanica',assetsPath+'/img/icomecanica.png'),this.load.image('icoranking',assetsPath+'/img/icoranking.png'),this.load.image('icoterminos',assetsPath+'/img/icoterminos.png'),this.load.image('icosonido',assetsPath+'/img/icosonido.png'),this.load.image('icosonidoPause',assetsPath+'/img/icosonido-pausa.png'),this.load.image('icoright',assetsPath+'/img/right.png'),this.load.image('icoleft',assetsPath+'/img/left.png'),this.load.image('mec1',assetsPath+'/img/mecanica/1-01.png'),this.load.image('mec2',assetsPath+'/img/mecanica/2-01.png'),this.load.image('mec3',assetsPath+'/img/mecanica/3-01.png'),this.load.image('mec4',assetsPath+'/img/mecanica/4-01.png'),this.load.image('mec5',assetsPath+'/img/mecanica/5-01.png'),this.load.image('mec6',assetsPath+'/img/mecanica/6-01.png'),this.load.image('mec7',assetsPath+'/img/mecanica/7-01.png'),this.load.image('mec8',assetsPath+'/img/mecanica/8-01.png'),this.load.image('mec10',assetsPath+'/img/mecanica/10-01.png'),this.load.image('bolaon',assetsPath+'/img/bolaon.png'),this.load.image('bolaoff',assetsPath+'/img/bolaoff.png'),this.load.image('boton',assetsPath+'/img/boton.png'),this.load.image('botonModal',assetsPath+'/img/boton-modal.png'),this.load.image('icoterminos',assetsPath+'/img/icoterminos.png'),this.load.image('icoterminos',assetsPath+'/img/icoterminos.png'),this.load.image('icopause',assetsPath+'/img/pause.png'),this.load.atlasJSONHash('chispa-orange',assetsPath+'/img/chispas/gris/gris.png',assetsPath+'/img/chispas/gris/gris.json'),this.load.atlasJSONHash('chispa-yellow',assetsPath+'/img/chispas/amarillo/sprites.png',assetsPath+'/img/chispas/amarillo/sprites.json'),this.load.atlasJSONHash('chispa-blue',assetsPath+'/img/chispas/azul/sprites.png',assetsPath+'/img/chispas/azul/sprites.json'),this.load.atlasJSONHash('chispa-magenta',assetsPath+'/img/chispas/morada/sprites.png',assetsPath+'/img/chispas/morada/sprites.json'),this.load.atlasJSONHash('chispa-red',assetsPath+'/img/chispas/roja/sprites.png',assetsPath+'/img/chispas/roja/sprites.json'),this.load.atlasJSONHash('chispa-green',assetsPath+'/img/chispas/verde/sprites.png',assetsPath+'/img/chispas/verde/sprites.json'),this.load.atlasJSONHash('mentol',assetsPath+'/img/textos/mentol.png',assetsPath+'/img/textos/mentol.json'),this.load.atlasJSONHash('purplex2',assetsPath+'/img/textos/purplex2.png',assetsPath+'/img/textos/purplex2.json'),this.load.atlasJSONHash('sabor',assetsPath+'/img/textos/sabor.png',assetsPath+'/img/textos/sabor.json'),this.load.atlasJSONHash('animMec2',assetsPath+'/img/mecanica/mecanica1.png',assetsPath+'/img/mecanica/mecanica1.json'),this.load.atlasJSONHash('animMec2P',assetsPath+'/img/mecanica/mecanica1puntos.png',assetsPath+'/img/mecanica/mecanica1puntos.json'),this.load.atlasJSONHash('animMec3',assetsPath+'/img/mecanica/mecanica2.png',assetsPath+'/img/mecanica/mecanica2.json'),this.load.atlasJSONHash('animMec3P',assetsPath+'/img/mecanica/mecanica2puntos.png',assetsPath+'/img/mecanica/mecanica2puntos.json'),this.load.atlasJSONHash('animMec4',assetsPath+'/img/mecanica/mecanica3.png',assetsPath+'/img/mecanica/mecanica3.json'),this.load.atlasJSONHash('animMec4P',assetsPath+'/img/mecanica/mecanica3puntos.png',assetsPath+'/img/mecanica/mecanica3puntos.json'),this.load.audio('explosion',[assetsPath+'/sounds/explosion.ogg',assetsPath+'/sounds/explosion.mp3']),this.load.audio('launch',[assetsPath+'/sounds/launch.ogg',assetsPath+'/sounds/launch.mp3']),this.load.audio('win',[assetsPath+'/sounds/win.ogg',assetsPath+'/sounds/win.mp3']),this.load.audio('fail',[assetsPath+'/sounds/fail.ogg',assetsPath+'/sounds/fail.mp3']),this.load.audio('goodjob',[assetsPath+'/sounds/goodjob.mp3']),this.load.audio('clic',[assetsPath+'/sounds/clic.mp3'])},create:function(){BubbleShoot.sound.clic=this.game.add.sound('clic'),this.state.start('menu')}},e.Preloader=t}(this),function(e){var t=function(e){this.game=e};t.prototype={preload:function(){this.load.crossOrigin='anonymous',this.load.spritesheet('loading',assetsPath+'/img/loading.png',512,256,13),this.load.audio('main',[assetsPath+'/sounds/main.mp3',assetsPath+'/sounds/main.ogg'])},create:function(){BubbleShoot.sound={},BubbleShoot.sound.main=this.game.add.sound('main'),BubbleShoot.sound.main.volume=0.05,BubbleShoot.sound.main.loop=!0,BubbleShoot.sound.main.play(),this.input.maxPointers=1,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,'produccion'==BubbleShoot.deploy&&this.getUser(),this.state.start('preloader')},getUser:function(){BubbleShoot.UI.gameApi.getUserInformation().then((e)=>{console.log(e),BubbleShoot.UI.infoUsuarioAPI=e;var t=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var a='https://ddbdev.co/chesterbubbleAPI/public/userIdPropios/'+BubbleShoot.UI.infoUsuarioAPI.respondentGUID;else var a='https://ddbdev.co/chesterbubbleAPI2/public/userIdPropios/'+BubbleShoot.UI.infoUsuarioAPI.respondentGUID;var o=this;t.onreadystatechange=function(){if(4==this.readyState){var e=JSON.parse(this.responseText);o.createRank(e)}},t.open('GET',a,!0);try{t.send()}catch(e){console.log(e)}}).catch((e)=>{console.log(e)})},createRank:function(e){if(0===e.length){var t='name='+BubbleShoot.UI.infoUsuarioAPI.firstName+' '+BubbleShoot.UI.infoUsuarioAPI.lastName+'&id_los_propios='+BubbleShoot.UI.infoUsuarioAPI.respondentGUID+'',a=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var o='https://ddbdev.co/chesterbubbleAPI/public/ranking';else var o='https://ddbdev.co/chesterbubbleAPI2/public/ranking';a.open('POST',o,!0),a.setRequestHeader('Content-type','application/x-www-form-urlencoded'),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){console.log(a.responseText);var e=JSON.parse(a.responseText);BubbleShoot.UI.infoUsuarioAPI.pointsOld=0,BubbleShoot.UI.infoUsuarioAPI.idAPI=''===e.data[0].id?0:e.data[0].id}},a.send(t),BubbleShoot.UI.gameApi.createGameSession().then((e)=>{BubbleShoot.UI.gameSession=e.gameSessionID;var t={gameSessionID:BubbleShoot.UI.gameSession,points:60};BubbleShoot.UI.gameApi.sendPoints(t).then((e)=>{console.log(e)}).catch((e)=>{console.log(e)})}).catch((e)=>{console.error(e)})}else BubbleShoot.UI.infoUsuarioAPI.pointsOld=''===e[0].points?0:e[0].points,BubbleShoot.UI.infoUsuarioAPI.idAPI=''===e[0].id?0:e[0].id,BubbleShoot.UI.infoUsuarioAPI.time=''===e[0].time?0:e[0].time,BubbleShoot.UI.infoUsuarioAPI.name=''===e[0].name?0:e[0].name,BubbleShoot.UI.infoUsuarioAPI.position=''===e[0].position?0:e[0].position}},e.Boot=t}(this),function(e){var t=function(e){this.game=e};t.prototype={create:function(){this.background=BubbleShoot.game.add.image(0,0,'backGame2'),BubbleShoot.UI.changeBack2();var e={font:'90px din_condensedbold',fill:'#fff',align:'center',boundsAlignH:'right',boundsAlignV:'middle',wordWrap:!0,wordWrapWidth:300};this.loading=this.game.add.sprite(0,0,'loading'),this.loading.scale.setTo(0.3),this.loading.y=this.game.world.height/2-this.loading.height/2,this.loading.x=this.game.world.width/2-this.loading.width/2;this.loading.animations.add('start');this.loading.animations.play('start',30,!0),e.font='60px din_condensedbold';var t=BubbleShoot.game.add.text(0,0,'RANKING',e);t.y=80,t.x=BubbleShoot.game.world.width/2-t.width/2;var a=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var o='https://ddbdev.co/chesterbubbleAPI/public/positions';else var o='https://ddbdev.co/chesterbubbleAPI2/public/positions';var i=this;a.onreadystatechange=function(){if(4==this.readyState){var e=JSON.parse(this.responseText);i.updateUsuarios(e)}},a.open('GET',o,!0);try{a.send()}catch(e){console.log(e)}},updateUsuarios:function(e){'produccion'==BubbleShoot.deploy&&this.getUser(),this.loading.animations.stop('start'),this.loading.visible=!1;var t=[],a={font:'90px din_condensedbold',fill:'#fff',align:'center'};e[0].map(function(e){25<e.name.length&&(e.name=e.name.substring(0,20)+'...'),e.name=e.name.toLowerCase(),e.name=e.name.replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),newUsuario=[e.position+'',e.name,e.points+'',e.time],t.push(newUsuario)}),a.tabs=[120,230,100,80],a.font='30px din_condensedbold';var o=this.game.add.text(0,0,'',a);o.parseList(['POSICI\xD3N','NOMBRES','PUNTOS','TIEMPO']),o.x=BubbleShoot.game.world.width/2-o.width/2,o.y=BubbleShoot.game.world.height/2-o.height/2-270,a.font='30px din_condensedbold';var i=this.game.add.image(0,0,'barra');i.scale.setTo(0.75),i.x=BubbleShoot.game.world.width/2-i.width/2,i.y=o.y+50,i.alpha=0.3,'produccion'!=BubbleShoot.deploy&&(BubbleShoot.UI.infoUsuarioAPI={},BubbleShoot.UI.infoUsuarioAPI.pointsOld=8.5e7,BubbleShoot.UI.infoUsuarioAPI.name='Cristian Andres Arrieta',BubbleShoot.UI.infoUsuarioAPI.time='00:00:20',BubbleShoot.UI.infoUsuarioAPI.position='1');var n=[BubbleShoot.UI.infoUsuarioAPI.position,BubbleShoot.UI.infoUsuarioAPI.name,BubbleShoot.UI.infoUsuarioAPI.pointsOld,BubbleShoot.UI.infoUsuarioAPI.time],d=this.game.add.text(0,0,'',a);d.parseList(n),d.x=BubbleShoot.game.world.width/2-o.width/2,d.y=o.y+50;var s=this.game.add.text(0,0,'',a);s.parseList(t),s.x=BubbleShoot.game.world.width/2-o.width/2,s.y=BubbleShoot.game.world.height/2-s.height/2+10;var r=this.game.add.button(0,0,'icoinicio');r.scale.setTo(1.2),r.alpha=0.6,r.y=0.8*this.world.height-0.8*r.height,r.x=this.world.width/2-r.width/2-200;var l=this.game.add.button(0,0,'icomecanica');l.scale.setTo(1.2),l.alpha=0.6,l.y=0.8*this.world.height-0.8*l.height,l.x=this.world.width/2-l.width/2+70;var g=this.game.add.button(0,0,'icosonido');g.scale.setTo(1.2),g.alpha=0.6,g.y=0.8*this.world.height-0.8*g.height,g.x=this.world.width/2-g.width/2+200;var p=this.add.button(0,0,'botonModal');p.scale.setTo(0.75),p.alpha=0.6,p.y=0.92*BubbleShoot.game.world.height-0.92*p.height,p.x=BubbleShoot.game.world.width/2-p.width/2,a.font='40px din_condensedbold',this.text5=BubbleShoot.game.add.text(0,0,'JUGAR',a),this.text5.y=0.91*BubbleShoot.game.world.height-0.91*this.text5.height,this.text5.x=BubbleShoot.game.world.width/2-this.text5.width/2,p.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),this.state.start('game')},this),r.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),this.game.state.start('menu')},this),l.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.UI.createMecanica()},this),g.events.onInputDown.add(function(){BubbleShoot.UI.clickSound(),BubbleShoot.game.sound.mute=!BubbleShoot.game.sound.mute},this)},getUser:function(){BubbleShoot.UI.gameApi.getUserInformation().then((e)=>{console.log(e),BubbleShoot.UI.infoUsuarioAPI=e;var t=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var a='https://ddbdev.co/chesterbubbleAPI/public/userIdPropios/'+BubbleShoot.UI.infoUsuarioAPI.respondentGUID;else var a='https://ddbdev.co/chesterbubbleAPI2/public/userIdPropios/'+BubbleShoot.UI.infoUsuarioAPI.respondentGUID;var o=this;t.onreadystatechange=function(){if(4==this.readyState){var e=JSON.parse(this.responseText);o.createRank(e)}},t.open('GET',a,!0);try{t.send()}catch(e){console.log(e)}}).catch((e)=>{console.log(e)})},createRank:function(e){if(0===e.length){var t='name='+BubbleShoot.UI.infoUsuarioAPI.firstName+' '+BubbleShoot.UI.infoUsuarioAPI.lastName+'&id_los_propios='+BubbleShoot.UI.infoUsuarioAPI.respondentGUID+'',a=new XMLHttpRequest;if(1==BubbleShoot.UI.reg)var o='https://ddbdev.co/chesterbubbleAPI/public/ranking';else var o='https://ddbdev.co/chesterbubbleAPI2/public/ranking';a.open('POST',o,!0),a.setRequestHeader('Content-type','application/x-www-form-urlencoded'),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){console.log(a.responseText);var e=JSON.parse(a.responseText);BubbleShoot.UI.infoUsuarioAPI.pointsOld=0,BubbleShoot.UI.infoUsuarioAPI.idAPI=''===e.data[0].id?0:e.data[0].id}},a.send(t),BubbleShoot.UI.gameApi.createGameSession().then((e)=>{BubbleShoot.UI.gameSession=e.gameSessionID;var t={gameSessionID:BubbleShoot.UI.gameSession,points:60};BubbleShoot.UI.gameApi.sendPoints(t).then((e)=>{console.log(e)}).catch((e)=>{console.log(e)})}).catch((e)=>{console.error(e)})}else BubbleShoot.UI.infoUsuarioAPI.pointsOld=''===e[0].points?0:e[0].points,BubbleShoot.UI.infoUsuarioAPI.idAPI=''===e[0].id?0:e[0].id,BubbleShoot.UI.infoUsuarioAPI.time=''===e[0].time?0:e[0].time,BubbleShoot.UI.infoUsuarioAPI.name=''===e[0].name?0:e[0].name,BubbleShoot.UI.infoUsuarioAPI.position=''===e[0].position?0:e[0].position}},e.Ranking=t}(this),function(){var e=new Phaser.Game(BubbleShoot.UI.width,BubbleShoot.UI.height,Phaser.AUTO,'game',null,!0);e.state.add('boot',Boot),e.state.add('ranking',Ranking),e.state.add('preloader',Preloader),e.state.add('menu',Menu),e.state.add('game',Game),e.state.start('boot'),BubbleShoot.game=e}(this);